(this.webpackJsonpwikiblog=this.webpackJsonpwikiblog||[]).push([[0],{42:function(e,t,a){e.exports=a(75)},71:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=a(4),i=a(23),s={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_APP_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"/wikiblog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_MEASUREMENT_ID};i.initializeApp(s);var m=i.database(),u=i.storage(),d=new i.auth.GoogleAuthProvider,E=new i.auth.FacebookAuthProvider,v=a(22),p=a(40),f=a(5),h=a(17),b=[],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE":return[].concat(Object(h.a)(e),[t.article]);case"EDIT_ARTICLE":return e.map((function(e){return t.id===e.id?Object(f.a)(Object(f.a)({},e),t.updates):e}));case"REMOVE_ARTICLE":return e.filter((function(e){return e.id!==t.id}));case"GET_ARTICLES":return t.articles;default:return e}},N=[],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return[].concat(Object(h.a)(e),[t.comment]);case"EDIT_COMMENT":return e.map((function(a){return t.id===a.id?Object(f.a)(Object(f.a)({},a),t.updates):e}));case"REMOVE_COMMENT":return e.filter((function(e){return e.id!==t.id}));case"GET_COMMENTS":return t.comments;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid};case"LOGOUT":return{};default:return e}},O=[],y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t){case"CREATE_USER_WITH_EMAIL_AND_PASSWORD":return[].concat(Object(h.a)(e),[t.user]);default:return e}},C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d,_=a(26),A=a.n(_),k=a(33),T=function(e){return{type:"ADD_ARTICLE",article:e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{type:"REMOVE_ARTICLE",id:t}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(19),I=a(6),R=(a(68),a(71),a(18));var P=function(e){var t=e.categories.map((function(t,a){var n=e.currentCategory===t?"active":"";return r.a.createElement("span",{key:"category-".concat(a),className:"badge badge-pill badge-light fw-600 m-2 p-2 ".concat(n),onClick:e.onClick},t)})),a="Tout"===e.currentCategory?"active":"";return r.a.createElement("div",{className:"row m-0 h-25"},r.a.createElement("div",{className:"col-12 p-5"},r.a.createElement("span",{key:"all",className:"badge badge-pill badge-light fw-600 m-2 p-2 ".concat(a),onClick:e.onClick},"Tout"),t))},x=a(15),U=a.n(x),M=a(3);var F=function(e){var t=e.index,a=(e.currentCategory,e.title),n=(e.subtitle,e.category),c=e.imageUrl,l=e.permalink,o=e.createdAt,i={backgroundImage:"url(".concat(c,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},s={backgroundColor:function(){switch(n){case"Chronique":return"#e61e33";case"Analyse":return"#4100f6";default:return"#000000"}}()};return function(e){return e<3?0===e?r.a.createElement("div",{className:"col-3 featured-articles-item-".concat(e," h-75"),style:i},r.a.createElement("div",{className:"row h-100 align-items-end p-3"},r.a.createElement("div",{className:"col-12 featured-articles-info h-50 mb-3 p-4"},r.a.createElement("span",{className:"fw-400 cat-badge",style:s},n),r.a.createElement(M.a,{to:"/view/".concat(l)},r.a.createElement("h6",{className:"fw-500"},a)),r.a.createElement("p",{className:"fw-400 article-date"},U()(o).format("MMMM Do YYYY"))))):r.a.createElement("div",{className:"col-3 offset-1-c featured-articles-item-".concat(e," h-75"),style:i},r.a.createElement("div",{className:"row h-100 align-items-end p-3"},r.a.createElement("div",{className:"col-12 featured-articles-info h-50 mb-3 p-4"},r.a.createElement("span",{className:"fw-400 cat-badge",style:s},n),r.a.createElement(M.a,{to:"/view/".concat(l)},r.a.createElement("h6",{className:"fw-500"},a)),r.a.createElement("p",{className:"fw-400 article-date"},U()(o).format("MMMM Do YYYY"))))):r.a.createElement("div",null,"No featured articles...")}(t)};var L=function(e){var t=e.category,a=e.articles.filter((function(e){return("Tout"===t?"Podcast"!==e.category:e.category===t)&&e.isFeatured})).slice(0,3).map((function(e,a){return r.a.createElement(F,Object.assign({key:"ft-articles-".concat(a),index:a,currentCategory:t},e))}));return r.a.createElement("div",{className:"row justify-content-center h-75 m-0"},a)};var W=function(e){var t=Object(n.useState)("Tout"),a=Object(R.a)(t,2),c=a[0],l=a[1],o=["Analyse","Chronique","Interview","Actualit\xe9"],i=e.articles.filter((function(e){return o.includes(e.category)})).map((function(e){return e.category})),s=Object(h.a)(new Set(i));return r.a.createElement("div",{className:"container d-flex p-0 mb-5"},r.a.createElement("div",{className:"featured-articles w-100 d-flex"},r.a.createElement("div",{className:"row h-100 w-100",style:{margin:"auto"}},r.a.createElement("div",{className:"col-12"},r.a.createElement(P,{currentCategory:c,categories:s,onClick:function(e){var t=e.target.innerText;l(t)}}),r.a.createElement(L,{category:c,articles:e.articles})))))};var H=function(e){e.title,e.subtitle;var t=e.imageUrl,a=e.permalink,n={backgroundImage:"url(".concat(t,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return r.a.createElement("div",{className:"preview-featured-podcasts col-3 pl-3 pr-3"},r.a.createElement(M.a,{to:"/view/".concat(a)},r.a.createElement("div",{className:"featured-podcasts-items h-70",style:n})))};var B=function(e){var t=e.articles.filter((function(e){return"Podcast"===e.category&&e.isFeatured}));return r.a.createElement("div",{className:"featured-podcasts-list row h-60 m-1"},t.length>0?t.map((function(e){return r.a.createElement(H,Object.assign({key:e.id},e))})):r.a.createElement("div",null,"No podcasts available..."))};var z=function(e){var t=e.articles;return r.a.createElement("section",{id:"featured-podcasts",className:"container"},r.a.createElement("div",{className:"featured-podcasts row h-100"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row h-40 p-4 pt-5"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"fw-500"},"Latest podcasts"),r.a.createElement("h5",{className:"podcasts-link"},"Ecouter d'autres podcasts ->"))),r.a.createElement(B,{articles:t}))))},K=function(e){return e.map((function(e){return e}))};var V=function(){return r.a.createElement("div",{className:"featured-sotw col-4-c h-100"},r.a.createElement("div",{className:"row h-30 pl-4 pr-4 pt-5"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"fw-500"},"Soundtrack of the Month"))),r.a.createElement("div",{className:"row h-50"},r.a.createElement("div",{className:"col-12 song-img"},r.a.createElement("img",{src:"/media/images/youtube_icon_64x64.png",alt:"Watch the video"}))))};var G=function(e){var t=e.articles.filter((function(e){return"Artbooks"===e.category&&e.isFeatured})).slice(0,1).map((function(e,t){return r.a.createElement("div",{key:"artbook-".concat(t),className:"row h-60 mt-5 ml-4 mr-4"},r.a.createElement("div",{className:"col-6 artbook-img d-flex h-100"},r.a.createElement("img",{src:"/media/images/watch_icon_64x64.png",alt:"Read this article"})),r.a.createElement("div",{className:"col-5 offset-1-c artbook-info h-100"},r.a.createElement("h3",{className:"fw-700"},e.title),r.a.createElement("p",{className:"fw-100"},e.description.substring(0,255),"...")))}));return r.a.createElement("div",{className:"featured-artbooks col-7-b offset-1-c h-100"},r.a.createElement("h2",{className:"fw-500 pl-4 pr-4 pt-5"},"Artbooks reviews and showcases"),t)};var Y=function(e){return r.a.createElement("div",{className:"col-12 hero h-100"},e.children)};var q=function(e){var t=e.featuredSoundtracks.slice(0,4).map((function(e,t){var a=e.title,n=e.imageUrl,c={backgroundImage:"url(".concat(n,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return 0===t?r.a.createElement("div",{key:"ft-soundtrack-".concat(t),className:"col-2 featured-soundtracks-items h-70",style:c},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-12 hero-info h-100 p-0"},r.a.createElement("h6",{className:"fw-500 p-1 pt-4"},a)),r.a.createElement(Y,null))):r.a.createElement("div",{key:"ft-soundtrack-".concat(t),className:"col-2 featured-soundtracks-items offset-1-c h-70",style:c},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-12 hero-info h-100 p-0"},r.a.createElement("h6",{className:"fw-500 p-1 pt-4"},a)),r.a.createElement(Y,null)))}));return r.a.createElement("div",{className:"row h-70 featured-soundtracks-list d-flex"},t.length>0?t:"No soundtrack reviewed yet...")};var $=function(e){var t=e.articles.filter((function(e){return"Soundtracks"===e.category&&e.isFeatured}));return r.a.createElement("section",{id:"featured-soundtracks",className:"container"},r.a.createElement("div",{className:"featured-soundtracks row h-100 d-flex"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row h-30 p-4 pt-5"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"fw-500"},"Original",r.a.createElement("br",null),"Sountracks Reviews"),r.a.createElement("h5",{className:"soundtracks-link"},r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-chat-right-text mr-2",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M2 1h12a1 1 0 0 1 1 1v11.586l-2-2A2 2 0 0 0 11.586 11H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})),"Donnez votre avis d\xe8s maintenant ->"))),r.a.createElement(q,{featuredSoundtracks:t}))))};var J=Object(o.b)((function(e){return{articles:K(e.articles),user:e.auth}}))((function(e){return console.log(e.user),r.a.createElement("div",null,r.a.createElement(W,{articles:e.articles}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row sct-h"},r.a.createElement(V,null),r.a.createElement(G,{articles:e.articles}))),r.a.createElement(z,{articles:e.articles}),r.a.createElement($,{articles:e.articles}))}));var X=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(J,null))};var Z=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Dashboard"),r.a.createElement(M.a,{to:"/dashboard/articles"},"Articles"))},Q=a(8),ee=a(9),te=a(11),ae=a(10),ne=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(ee.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.props.onSubmit},r.a.createElement("div",{className:"form-group"},"Uploading"===this.props.uploadStatus?r.a.createElement("div",{className:"spinner-border text-success",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement("img",{src:"".concat(this.props.imageUrl),className:"w-50",alt:""}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:this.props.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",null,"Upload")))}}]),a}(r.a.Component),re=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).onTitleChange=function(e){var t=e.target.value;n.setState((function(){return{title:t}}))},n.onSubtitleChange=function(e){var t=e.target.value;n.setState((function(){return{subtitle:t}}))},n.onDescriptionChange=function(e){var t=e.target.value;n.setState((function(){return{description:t}}))},n.onCategoryChange=function(e){var t=e.target.value;n.setState((function(){return{category:t}}))},n.onImageFileChange=function(e){var t=e.target.files[0];n.setState((function(){return{imageFile:t}}))},n.onIsFeaturedChange=function(){n.setState((function(){return{isFeatured:!n.state.isFeatured}}))},n.onFirebaseUpload=function(e){e.preventDefault(),console.log("start of upload");var t=n.state.imageFile;""===t?console.error("Not an image, file is a ".concat(typeof t)):(n.setState((function(){return{uploadStatus:"Uploading"}})),u.ref("/images/".concat(t.name)).put(t).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),(function(){u.ref("images").child(t.name).getDownloadURL().then((function(e){n.setState((function(){return{imageUrl:e,uploadStatus:"Done"}})),console.log(n.state.uploadStatus)}))})))},n.onSubmit=function(e){if(e.preventDefault(),n.state.title&&n.state.description){n.setState({error:"",status:"Article successfully published!"});var t=n.state.id,a=n.state.title.concat("-",n.state.subtitle,"-",t.substring(t.length-5));console.log(n.state.imageUrl),n.props.onSubmit({title:n.state.title,subtitle:n.state.subtitle,description:n.state.description,category:n.state.category,permalink:a.replace(/\s+/g,"-").replace(/[.,/#!$%^&*;:{}=_`~()@+?><[\]+]/g,"").toLowerCase(),imageUrl:n.state.imageUrl,isFeatured:n.state.isFeatured,createdAt:n.state.createdAt.valueOf()}),console.log("Submitted"),console.log(n.state.imageUrl)}else n.setState((function(){return{error:"Please provide a title and a description.",status:""}})),console.log(n.state.error)},n.state={id:e.article?e.article.id:"",title:e.article?e.article.title:"",subtitle:e.article?e.article.subtitle:"",category:e.article?e.article.category:"Chronique",description:e.article?e.article.description:"",imageFile:"",imageUrl:e.article?e.article.imageUrl:"",isFeatured:!!e.article&&e.article.isFeatured,uploadStatus:"",permalink:e.article?e.article.permalink:"",createdAt:e.article?U()(e.article.createdAt):U()()},n}return Object(ee.a)(a,[{key:"render",value:function(){return console.log(this.state.isFeatured),r.a.createElement("div",{className:"row w-100"},r.a.createElement("div",{className:"col-6 m-auto"},this.state.error&&r.a.createElement("p",{className:"text-danger"},this.state.error),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"fw-500"},"Title: "),r.a.createElement("input",{type:"text",className:"form-control",name:"title",value:this.state.title,placeholder:"Title of your article",onChange:this.onTitleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"fw-500"},"Subtitle: "),r.a.createElement("input",{type:"text",className:"form-control",name:"subtitle",value:this.state.subtitle,placeholder:"Subtitle of your article",onChange:this.onSubtitleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"fw-500",htmlFor:""},"Description: "),r.a.createElement("textarea",{className:"form-control",placeholder:"Type your content here...",name:"description",value:this.state.description,onChange:this.onDescriptionChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category: "),r.a.createElement("select",{name:"categories",id:"categories-select",value:this.state.category,onChange:this.onCategoryChange,required:!0},r.a.createElement("option",{value:"Chronique"},"Chronique"),r.a.createElement("option",{value:"Analyse"},"Analyse"),r.a.createElement("option",{value:"Podcast"},"Podcast"),r.a.createElement("option",{value:"Wiki"},"Wiki"),r.a.createElement("option",{value:"News"},"Actualit\xe9"),r.a.createElement("option",{value:"Interview"},"Interview"),r.a.createElement("option",{value:"Artbooks"},"Artbooks"),r.a.createElement("option",{value:"Soundtracks"},"Soundtracks")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Publish as Featured Article: \xa0"),r.a.createElement("input",{type:"checkbox",onChange:this.onIsFeaturedChange,checked:this.state.isFeatured}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Publish"),r.a.createElement("br",null),this.state.status&&r.a.createElement("p",null,this.state.status))),r.a.createElement(ne,{onChange:this.onImageFileChange,onSubmit:this.onFirebaseUpload,imageUrl:this.state.imageUrl,uploadStatus:this.state.uploadStatus})))}}]),a}(r.a.Component),ce=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.startAddArticle(t),e.props.history.push("/dashboard/articles"),console.log(t)},e}return Object(ee.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Create an article"),r.a.createElement(re,{onSubmit:this.onSubmit}))}}]),a}(r.a.Component),le=Object(o.b)(void 0,(function(e){return{startAddArticle:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,a){var n=e.title,r=void 0===n?"":n,c=e.subtitle,l=void 0===c?"":c,o=e.description,i=void 0===o?"":o,s=e.category,u=void 0===s?"":s,d=e.permalink,E=void 0===d?"":d,v=e.imageUrl,p=void 0===v?"":v,h=e.isFeatured,b=void 0===h?"":h,g=e.createdAt,N={title:r,subtitle:l,description:i,category:u,permalink:E,imageUrl:p,isFeatured:b,createdAt:void 0===g?0:g};return m.ref("articles").push(N).then((function(e){t(T(Object(f.a)({id:e.key},N))),console.log("Data successfully created!")}))}}(t))}}}))(ce);var oe=function(e){return r.a.createElement("nav",{className:"navbar navbar-expand-lg p-0"},r.a.createElement("div",{className:"col-3"}),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("svg",{className:"bi bi-three-dots-vertical",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M9.5 13a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm0-5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm0-5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",clipRule:"evenodd"}))),r.a.createElement("div",{className:"col-5"}),r.a.createElement("div",{className:"col-4 collapse navbar-collapse justify-content-end h-100 bg-nav",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav mr-5 ml-5 fw-500"},r.a.createElement("svg",{width:"2.4em",height:"2.4em",viewBox:"0 0 16 16",className:"bi bi-search",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"})),r.a.createElement("input",{className:"form-control search-bar ml-2",type:"search",placeholder:"Search an article","aria-label":"Search"}),r.a.createElement(M.b,{to:"/",className:"nav-item nav-link active"},"Home"),r.a.createElement(M.b,{to:"/dashboard",className:"nav-item nav-link"},"Dashboard"),r.a.createElement(M.b,{to:"/help",className:"nav-item nav-link"},"Help"))))};var ie=function(){return r.a.createElement("header",{className:"flex"},r.a.createElement(oe,null))};var se=function(){return r.a.createElement("div",null,"404 Not found...")},me=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.startEditArticle(e.props.article.id,t),e.props.history.push("/dashboard/articles")},e}return Object(ee.a)(a,[{key:"render",value:function(){return console.log(this.props.article),r.a.createElement(re,{article:this.props.article,onSubmit:this.onSubmit})}}]),a}(r.a.Component),ue=Object(o.b)((function(e,t){return{article:e.articles.find((function(e){return e.id===t.match.params.id}))}}),(function(e,t){return{startEditArticle:function(t,a){return e(function(e,t){return function(a,n){return m.ref("articles/".concat(e)).update(t).then((function(){a(function(e,t){return{type:"EDIT_ARTICLE",id:e,updates:t}}(e,t)),console.log("Data successfully updated!")}))}}(t,a))}}}))(me),de=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){t.preventDefault();var a=Object(I.a)();e.props.startRemoveArticle({id:e.props.id}),a.push("/dashboard/articles")},e}return Object(ee.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.title,n=e.subtitle,c=e.category,l=e.permalink,o=e.createdAt;return r.a.createElement("div",{className:"row w-100 p-3"},r.a.createElement("div",{className:"col-4"},r.a.createElement(M.a,{to:"/dashboard/articles/edit/".concat(t)},r.a.createElement("h6",null,a),r.a.createElement("h6",null,n)),r.a.createElement(M.a,{to:"/dashboard/articles/edit/".concat(t)}," Edit "),r.a.createElement(M.a,{onClick:this.onClick}," Remove "),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/view/".concat(l)}," View ")),r.a.createElement("div",{className:"col-2"},r.a.createElement("small",null,"Yanis Dib")),r.a.createElement("div",{className:"col-2"},r.a.createElement("p",null,c)),r.a.createElement("div",{className:"col-2"},"No comments"),r.a.createElement("div",{className:"col-2"},r.a.createElement("small",null,U()(o).format("DD/MM/YYYY"))))}}]),a}(r.a.Component),Ee=Object(o.b)(void 0,(function(e,t){return{startRemoveArticle:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return function(e,a){return m.ref("articles/".concat(t)).remove().then((function(){e(j({id:t}))}))}}(t))}}}))(de);var ve=Object(o.b)((function(e){return{articles:K(e.articles)}}))((function(e){return r.a.createElement("section",{id:"d-articles-list"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-1"},r.a.createElement("h4",{className:"fw-500"},"Articles")),r.a.createElement("div",{className:"col-2"},r.a.createElement(M.a,{to:"/dashboard/articles/create"},"Add an article"))),r.a.createElement("div",{className:"row mb-5"},r.a.createElement("div",{className:"col-2"},r.a.createElement("select",null,r.a.createElement("option",{value:""},"Filter"),r.a.createElement("option",null,"Chronique"),r.a.createElement("option",null,"Review"),r.a.createElement("option",null,"Analyse"))),r.a.createElement("div",{className:"col-2"},r.a.createElement("select",null,r.a.createElement("option",{value:""},"Sort by"),r.a.createElement("option",null,"Date"),r.a.createElement("option",null,"Comments"),r.a.createElement("option",null,"Author"))),r.a.createElement("div",{className:"col-4"}),r.a.createElement("div",{className:"col-4"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},"Title"),r.a.createElement("div",{className:"col-2"},"Author"),r.a.createElement("div",{className:"col-2"},"Category"),r.a.createElement("div",{className:"col-2"},"Comments"),r.a.createElement("div",{className:"col-2"},"Date"),console.log(e.articles,e.articles.length),e.articles.length>0?e.articles.map((function(e){return r.a.createElement(Ee,Object.assign({key:e.id},e))})):r.a.createElement("p",null,"No articles..."))))})),pe=function(e){return{type:"ADD_COMMENT",comment:e}},fe=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(e){var n;return Object(Q.a)(this,a),(n=t.call(this,e)).onUsernameChange=function(e){var t=e.target.value;n.setState((function(){return{username:t}}))},n.onTitleChange=function(e){var t=e.target.value;n.setState((function(){return{title:t}}))},n.onBodyChange=function(e){var t=e.target.value;n.setState((function(){return{body:t}}))},n.onSubmit=function(e){e.preventDefault(),n.state.username&&n.state.title&&n.state.body?(n.setState((function(){return{error:""}})),n.props.onSubmit({username:n.state.username,title:n.state.title,body:n.state.body,createdAt:n.state.createdAt.valueOf()}),document.getElementById("comment-form").reset(),console.log(n.state.error)):(n.setState((function(){return{error:"Please provide a username, a title and a comment."}})),console.log(n.state.error))},n.state={username:e.comment?e.comment.username:"",title:e.comment?e.comment.title:"",body:e.comment?e.comment.body:"",createdAt:e.comment?U()(e.comment.createdAt):U()(),error:""},n}return Object(ee.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onSubmit,id:"comment-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"text-danger"},this.state.error)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"usernameInputText"},"Username:"),r.a.createElement("input",{type:"text",className:"form-control",id:"usernameInputText",onChange:this.onUsernameChange}),r.a.createElement("label",{htmlFor:"titleInputText"},"Title:"),r.a.createElement("input",{type:"text",className:"form-control",id:"titleInputText",onChange:this.onTitleChange}),r.a.createElement("label",{htmlFor:"commentTextarea"},"Comment:"),r.a.createElement("textarea",{className:"form-control",id:"commentTextarea",onChange:this.onBodyChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Commenter"))}}]),a}(r.a.Component),he=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){var a=e.props.idArticle;e.props.startAddComment(a,t),console.log(t)},e}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){this.props.startGetComments(this.props.idArticle)}},{key:"render",value:function(){var e=this.props.comments;return console.log(e),r.a.createElement("div",{id:"comments"},r.a.createElement("div",{id:"comments-wrapper"},0===e.length?r.a.createElement("div",null,"No comments yet..."):e.map((function(e,t){return console.log(e.id),r.a.createElement("div",{className:"row comments-items"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{src:"../media/images/identicon.png",className:"img-fluid rounded",width:"100",alt:"default-avatar"})),r.a.createElement("div",{className:"col-11 comments-item-".concat(t)},r.a.createElement("div",{className:"comments-title fw-600"},e.title),r.a.createElement("div",{className:"comments-body fw-300"},e.body),r.a.createElement("div",{className:"comments-username fw-500"},"Ecrit par ",e.username)))}))),r.a.createElement("h4",{className:"fw-600 mb-3 mt-5"},"Laisser un commentaire"),r.a.createElement(fe,{onSubmit:this.onSubmit}))}}]),a}(r.a.Component),be=Object(o.b)(void 0,(function(e){return{startAddComment:function(t,a){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var r=t.username,c=void 0===r?"":r,l=t.title,o=void 0===l?"":l,i=t.body,s=void 0===i?"":i,u=t.createdAt,d={username:c,title:o,body:s,createdAt:void 0===u?0:u};return m.ref("articles/".concat(e,"/comments")).push(d).then((function(e){a(pe(Object(f.a)({id:e.key},d))),console.log("Comment has been successfully added!")}))}}(t,a))},startGetComments:function(t){return e(function(e){return function(t){return m.ref("articles/".concat(e,"/comments")).once("value").then((function(e){var a=[];e.forEach((function(e){a.push(Object(f.a)({id:e.key},e.val()))})),t(function(e){return{type:"GET_COMMENTS",comments:e}}(a)),console.log(a)}))}}(t))}}}))(he),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return e[t]}))};var Ne=Object(o.b)((function(e,t){return{article:e.articles.find((function(e){return e.permalink===t.match.params.id})),comments:ge(e.comments)}}))((function(e){var t={backgroundImage:"url(".concat(e.article.imageUrl,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return console.log(e.comments),r.a.createElement("section",{id:"view"},r.a.createElement("div",{className:"article-cover",style:t}),r.a.createElement("div",{className:"container mt-5 mb-5"},r.a.createElement("h1",{className:"fw-300"},e.article.title),r.a.createElement("h1",{className:"fw-700"},e.article.subtitle),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 author-margin"},r.a.createElement("p",{className:"author fw-500"},"Published by ",r.a.createElement("a",{href:"#author"},"Yanis Dib"))),r.a.createElement("div",{className:"col-7"},r.a.createElement("p",{className:"content"},e.article.description))),r.a.createElement("h1",{className:"fw-700 mt-5"},"Commentaires"),r.a.createElement(be,{history:e.history,idArticle:e.article.id,comments:e.comments})))})),we=function(e){var t=Object(n.useState)(e),a=Object(R.a)(t,2),r=a[0],c=a[1];return{value:r,setValue:c,reset:function(){c("")},bind:{value:r,onChange:function(e){c(e.target.value)}}}};var Se=function(e){var t=we(""),a=t.value,c=t.bind,l=t.reset,o=we(""),i=o.value,s=o.bind,m=o.reset,u=Object(n.useState)(""),d=Object(R.a)(u,2),E=d[0],v=d[1],p=e.userData?e.userData:"";return console.log(p),console.log(e.btnText),r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement("small",{id:"error",className:"text-danger"},E),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=/^S*[a-zA-Z0-9!@#$%^&*)(+=._-]{6,}$/g,r=/^S*[a-zA-Z0-9!@)(.]{1,}$/g;a&&i?(v(""),a.match(r)&&i.match(n)?(e.onSubmit(Object(f.a)({email:a,password:i},p)),l(),m()):r.test(a)?n.test(i)||v("Votre mot de passe comporte des caract\xe8res non-valides."):v("Veuillez entre une adresse email valide.")):v("Veuillez saisir une adresse mail et un mot de passe")}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"userInputEmail"},"Identifiant"),r.a.createElement("input",Object.assign({type:"email",id:"userInputEmail",className:"form-control","aria-describedby":"emailHelp",placeholder:"Saisir une adresse email"},c)),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"L'adresse que vous avez choisi lors de votre inscription")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputPassword"},"Mot de passe"),r.a.createElement("input",Object.assign({type:"password",id:"userInputPassword",className:"form-control","aria-describedby":"passwordHelp",placeholder:"Mot de passe"},s))),r.a.createElement("small",{id:"infoData",className:"form-text text-muted text-danger"},"* Information obligatoire"),e.children,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},e.btnText))))};var Oe=Object(o.b)(void 0,(function(e){return{startLogin:function(t,a){return e(function(e,t){var a=t.email,n=t.password;return Object(k.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="Google"===t.t0?3:"Facebook"===t.t0?4:5;break;case 3:return t.abrupt("return",i.auth().signInWithPopup(d));case 4:return t.abrupt("return",i.auth().signInWithPopup(E));case 5:return t.abrupt("return",i.auth().signInWithEmailAndPassword(a,n).catch((function(e){var t=e.code,a=e.message;console.log("".concat(t,": ").concat(a))})));case 6:case 7:case"end":return t.stop()}}),t)})))}(t,a))}}}))((function(e){var t=Object(n.useState)(""),a=Object(R.a)(t,2),c=a[0];return a[1],r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12 container"},r.a.createElement(Se,{btnText:"Connexion",onSubmit:function(t){e.startLogin(c,t),e.history.push("/"),console.log(t)}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{type:"checkbox",id:"userInputCheck",className:"form-check-input"}),r.a.createElement("label",{className:"form-label-check",htmlFor:"userInputCheck"},"Se souvenir de moi")),r.a.createElement(M.a,{to:"/create-new-account"},r.a.createElement("small",{id:"newAccountHelp"},"Vous n'avez pas de compte ? Cr\xe9ez en un d\xe8s maintenant")),r.a.createElement("br",null))))})),ye=function(e){return{type:"CREATE_USER_WITH_EMAIL_AND_PASSWORD",user:e}};var Ce=Object(o.b)(void 0,(function(e){return{startCreateUserWithEmailAndPassword:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(k.a)(A.a.mark((function t(a,n){var r,c,l,o,s,u,d,E,v,p,h,b;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.email,c=void 0===r?"":r,l=e.password,o=void 0===l?"":l,s=e.firstName,u=void 0===s?"":s,d=e.lastName,E=void 0===d?"":d,v=n().auth.uid.metadata.a,p={email:c,password:o,firstName:u,lastName:E,createdAt:v},t.prev=3,t.abrupt("return",i.auth().createUserWithEmailAndPassword(c,o).then((function(e){try{return m.ref("users").push(p).then((function(){a(ye(Object(f.a)({id:e.uid},p))),console.log(e)}))}catch(r){var t=r.code,n=r.message;console.log("".concat(t,": ").concat(n))}})));case 7:t.prev=7,t.t0=t.catch(3),h=t.t0.code,b=t.t0.message,console.log("".concat(h,": ").concat(b));case 12:case"end":return t.stop()}}),t,null,[[3,7]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=we(""),a=t.value,n=t.bind,c=t.reset,l=we(""),o=l.value,i=l.bind,s={firstName:a,lastName:o},m={resetFirstName:c,resetLastName:l.reset};return r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12 container"},r.a.createElement(Se,{onSubmit:function(t){e.startCreateUserWithEmailAndPassword(t),e.history.push("/"),console.log(t)},userData:s,reset:m,btnText:"Cr\xe9er un compte"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"userInputFirstName"},"Pr\xe9nom *"),r.a.createElement("input",Object.assign({type:"firstName",id:"userInputFirstName",className:"form-control","aria-describedby":"firstNameHelp",placeholder:"Pr\xe9nom"},n)),r.a.createElement("label",{htmlFor:"userInputLastName"},"Nom *"),r.a.createElement("input",Object.assign({type:"lastName",id:"userInputLastName",className:"form-control","aria-describedby":"lastNameHelp",placeholder:"Nom"},i)),r.a.createElement("small",{id:"firstNameHelp",className:"form-text text-muted"},"Ces informations seront utilis\xe9es pour identifier vos notes et commentaires")))))}));var _e=function(){return r.a.createElement("div",{className:"row userbar fixed-bottom justify-content-center m-4"},r.a.createElement("div",{className:"col-auto h-100 userbar-items"},r.a.createElement("div",{className:"row row h-100 align-items-center justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(M.a,{to:"/login"},r.a.createElement("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-plus-square",fill:"#ffffff",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})))))))};var Ae=function(){return r.a.createElement("div",null)};var ke=function(){return r.a.createElement("div",null,r.a.createElement("a",{href:""},"Review"),r.a.createElement("br",null),r.a.createElement("a",{href:""},"Insight"),r.a.createElement("br",null),r.a.createElement("a",{href:""},"Podcast"),r.a.createElement("br",null),r.a.createElement("a",{href:""},"Wiki"),r.a.createElement("br",null),r.a.createElement("a",{href:""},"News"))};var Te=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("footer",{className:"row d-flex mt-5 pt-5 pb-5"},r.a.createElement("div",{className:"col-12 h-100"},r.a.createElement("div",{className:"row h-50"},r.a.createElement("div",{className:"col-3 footer-tags"},r.a.createElement("h6",null,"Tags"),r.a.createElement(Ae,null)),r.a.createElement("div",{className:"col-3 footer-categories"},r.a.createElement("h6",null,"Categories"),r.a.createElement(ke,null)),r.a.createElement("div",{className:"col-6 footer-articles"},r.a.createElement("h6",null,"Publications"))),r.a.createElement("div",{className:"row h-50"},r.a.createElement("div",{className:"col-3 footer-about"},r.a.createElement("h6",null,"About")),r.a.createElement("div",{className:"col-3 footer-site"},r.a.createElement("h6",null,"Site")),r.a.createElement("div",{className:"col-3 footer-joinus"},r.a.createElement("h6",null,"Join us")),r.a.createElement("div",{className:"col-3 footer-legal-rights"},r.a.createElement("h6",null,"Legal rights"))))))},je=Object(I.a)();var De=function(){return r.a.createElement(D.b,{history:je},r.a.createElement(ie,null),r.a.createElement("main",null,r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/",component:X,exact:!0}),r.a.createElement(D.a,{path:"/view/:id",component:Ne}),r.a.createElement(D.a,{path:"/dashboard",component:Z,exact:!0}),r.a.createElement(D.a,{path:"/dashboard/articles/create",component:le}),r.a.createElement(D.a,{path:"/dashboard/articles/edit/:id",component:ue}),r.a.createElement(D.a,{path:"/dashboard/articles",component:ve}),r.a.createElement(D.a,{path:"/login",component:Oe}),r.a.createElement(D.a,{path:"/create-new-account",component:Ce}),r.a.createElement(D.a,{path:"/404",component:se}))),r.a.createElement(_e,null),r.a.createElement(Te,null))},Ie=(a(74),Object(v.e)(Object(v.c)({articles:g,comments:w,auth:S,users:y}),C(Object(v.a)(p.a))));i.auth().onAuthStateChanged((function(e){e?(Ie.dispatch({type:"LOGIN",uid:e}),console.log(e.uid)):Ie.dispatch({type:"LOGOUT"})})),Ie.dispatch((function(e){return m.ref("articles").orderByChild("createdAt").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(Object(f.a)({id:e.key},e.val()))})),e(function(e){return{type:"GET_ARTICLES",articles:e}}(a))}))})).then((function(){try{l.a.render(r.a.createElement(o.a,{store:Ie},r.a.createElement(De,null)),document.getElementById("root"))}catch(e){l.a.render(r.a.createElement("div",null,"The app is currently not available..."),document.getElementById("root"))}})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.bb127530.chunk.js.map